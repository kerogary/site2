<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Flappy Bird</title>
  <style>
    :root {
      color-scheme: dark;
      --sky: #0f172a;
      --ground: #0b1021;
      --accent: #38bdf8;
      --pipe: #22c55e;
      --warning: #f43f5e;
    }

    * { box-sizing: border-box; }

    body {
      margin: 0;
      min-height: 100vh;
      display: grid;
      place-items: center;
      background: radial-gradient(circle at 20% 20%, rgba(56, 189, 248, 0.2), transparent 30%),
        radial-gradient(circle at 80% 0%, rgba(34, 197, 94, 0.18), transparent 30%),
        linear-gradient(var(--sky), var(--ground));
      color: #e2e8f0;
      font-family: 'Inter', system-ui, -apple-system, sans-serif;
    }

    .card {
      width: min(960px, 95vw);
      background: rgba(255, 255, 255, 0.04);
      border: 1px solid rgba(255, 255, 255, 0.08);
      border-radius: 20px;
      padding: 18px;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.35);
      backdrop-filter: blur(10px);
    }

    header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 14px;
      margin-bottom: 12px;
      flex-wrap: wrap;
    }

    h1 {
      margin: 0;
      font-size: clamp(24px, 4vw, 32px);
      letter-spacing: 0.02em;
    }

    .meta {
      display: flex;
      gap: 12px;
      align-items: center;
      flex-wrap: wrap;
      font-size: 14px;
      color: #cbd5e1;
    }

    canvas {
      display: block;
      width: 100%;
      height: auto;
      background: linear-gradient(#0ea5e9, #0ea5e9 60%, #0f172a 60%);
      border-radius: 14px;
      border: 1px solid rgba(255, 255, 255, 0.08);
    }

    .hud {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin: 12px 0 4px;
      font-weight: 600;
      letter-spacing: 0.01em;
    }

    .btn {
      cursor: pointer;
      border: none;
      border-radius: 12px;
      padding: 10px 14px;
      background: linear-gradient(120deg, var(--accent), #22d3ee);
      color: #0b1021;
      font-weight: 700;
      letter-spacing: 0.02em;
      box-shadow: 0 12px 30px rgba(56, 189, 248, 0.35);
      transition: transform 120ms ease, box-shadow 120ms ease;
    }

    .btn:hover { transform: translateY(-1px); box-shadow: 0 14px 32px rgba(56, 189, 248, 0.4); }
    .btn:active { transform: translateY(1px); box-shadow: 0 10px 24px rgba(56, 189, 248, 0.28); }

    .help {
      margin-top: 8px;
      font-size: 13px;
      color: #cbd5e1;
      line-height: 1.5;
    }

    .badge {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 6px 10px;
      border-radius: 12px;
      background: rgba(56, 189, 248, 0.12);
      color: #67e8f9;
      font-weight: 700;
      border: 1px solid rgba(56, 189, 248, 0.2);
    }

    .badge strong { color: #e0f2fe; }

    .lost { color: var(--warning); }
  </style>
</head>
<body>
  <div class="card">
    <header>
      <div>
        <h1>Flappy Bird</h1>
        <div class="meta">
          <span class="badge">Best <strong id="best">0</strong></span>
          <span>Tap, click, or press space to flap.</span>
        </div>
      </div>
      <button class="btn" id="restart">Restart</button>
    </header>

    <canvas id="game" width="960" height="540" aria-label="Flappy Bird game area"></canvas>
    <div class="hud">
      <div>Score: <span id="score">0</span></div>
      <div>Status: <span id="status">Ready</span></div>
    </div>
    <p class="help">Fly between the pipes to score points. Colliding with a pipe or the ground resets your run. The game scales to your screen so you can play on any device.</p>
  </div>

  <script>
    const canvas = document.getElementById('game');
    const ctx = canvas.getContext('2d');
    const scoreEl = document.getElementById('score');
    const statusEl = document.getElementById('status');
    const bestEl = document.getElementById('best');
    const restartBtn = document.getElementById('restart');

    const width = canvas.width;
    const height = canvas.height;
    const gravity = 0.4;
    const flapStrength = -7;
    const pipeGap = 140;
    const pipeWidth = 70;
    const pipeInterval = 1400;
    const groundHeight = 72;

    let bird, pipes, score, best, running, lastTime, spawnTimer;

    const loadBest = () => {
      const stored = localStorage.getItem('flappy-best');
      best = stored ? Number(stored) : 0;
      bestEl.textContent = best;
    };

    const saveBest = () => {
      if (score > best) {
        best = score;
        localStorage.setItem('flappy-best', best);
        bestEl.textContent = best;
      }
    };

    const reset = () => {
      bird = { x: width * 0.25, y: height / 2, r: 18, vel: 0 };
      pipes = [];
      score = 0;
      running = false;
      spawnTimer = 0;
      lastTime = performance.now();
      statusEl.textContent = 'Ready';
      scoreEl.textContent = score;
      render();
    };

    const flap = () => {
      if (!running) running = true;
      bird.vel = flapStrength;
    };

    const spawnPipe = () => {
      const safe = 120;
      const topHeight = Math.max(safe, Math.random() * (height - groundHeight - pipeGap - safe) + safe);
      pipes.push({ x: width + pipeWidth, top: topHeight, scored: false });
    };

    const update = (dt) => {
      if (!running) return;

      spawnTimer += dt;
      if (spawnTimer > pipeInterval) {
        spawnPipe();
        spawnTimer = 0;
      }

      bird.vel += gravity;
      bird.y += bird.vel;

      pipes.forEach(pipe => {
        pipe.x -= 2.8;
      });

      pipes = pipes.filter(pipe => pipe.x + pipeWidth > 0);

      pipes.forEach(pipe => {
        if (!pipe.scored && pipe.x + pipeWidth < bird.x - bird.r) {
          score++;
          pipe.scored = true;
          scoreEl.textContent = score;
          saveBest();
        }
      });

      if (bird.y + bird.r > height - groundHeight) return gameOver();
      if (bird.y - bird.r < 0) return gameOver();

      for (const pipe of pipes) {
        const topBottom = pipe.top - pipeGap;
        const hitX = bird.x + bird.r > pipe.x && bird.x - bird.r < pipe.x + pipeWidth;
        const hitTop = bird.y - bird.r < topBottom;
        const hitBottom = bird.y + bird.r > pipe.top;
        if (hitX && (hitTop || hitBottom)) return gameOver();
      }
    };

    const gameOver = () => {
      running = false;
      statusEl.textContent = 'Crashed! Tap restart to fly again.';
      statusEl.classList.add('lost');
      setTimeout(() => statusEl.classList.remove('lost'), 2000);
      reset();
    };

    const drawBird = () => {
      ctx.save();
      ctx.translate(bird.x, bird.y);
      ctx.rotate(bird.vel * 0.04);
      ctx.fillStyle = '#fbbf24';
      ctx.beginPath();
      ctx.ellipse(0, 0, bird.r + 2, bird.r, 0, 0, Math.PI * 2);
      ctx.fill();
      ctx.fillStyle = '#f8fafc';
      ctx.beginPath();
      ctx.arc(6, -6, 6, 0, Math.PI * 2);
      ctx.fill();
      ctx.fillStyle = '#0f172a';
      ctx.beginPath();
      ctx.arc(8, -6, 3, 0, Math.PI * 2);
      ctx.fill();
      ctx.fillStyle = '#f97316';
      ctx.beginPath();
      ctx.moveTo(12, 0);
      ctx.lineTo(22, -4);
      ctx.lineTo(12, -8);
      ctx.closePath();
      ctx.fill();
      ctx.restore();
    };

    const drawPipes = () => {
      ctx.fillStyle = '#16a34a';
      pipes.forEach(pipe => {
        const topBottom = pipe.top - pipeGap;
        ctx.fillRect(pipe.x, 0, pipeWidth, topBottom);
        ctx.fillRect(pipe.x, pipe.top, pipeWidth, height - groundHeight - pipe.top);

        ctx.fillStyle = '#22c55e';
        ctx.fillRect(pipe.x - 4, topBottom - 24, pipeWidth + 8, 24);
        ctx.fillRect(pipe.x - 4, pipe.top, pipeWidth + 8, 24);
        ctx.fillStyle = '#16a34a';
      });
    };

    const drawGround = () => {
      ctx.fillStyle = '#0b1021';
      ctx.fillRect(0, height - groundHeight, width, groundHeight);
      ctx.fillStyle = '#111827';
      for (let x = 0; x < width; x += 24) {
        ctx.fillRect(x, height - groundHeight, 16, 12);
      }
    };

    const render = () => {
      ctx.clearRect(0, 0, width, height);
      drawPipes();
      drawGround();
      drawBird();
    };

    const loop = (time) => {
      const dt = time - lastTime;
      lastTime = time;
      update(dt);
      render();
      requestAnimationFrame(loop);
    };

    const handleInput = (event) => {
      if (event.type === 'keydown' && event.code !== 'Space') return;
      event.preventDefault();
      flap();
      statusEl.textContent = 'Flying';
    };

    const init = () => {
      loadBest();
      reset();
      requestAnimationFrame(loop);
    };

    document.addEventListener('keydown', handleInput);
    document.addEventListener('mousedown', handleInput);
    document.addEventListener('touchstart', handleInput, { passive: false });
    restartBtn.addEventListener('click', reset);

    init();
  </script>
</body>
</html>
